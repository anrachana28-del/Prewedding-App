<!DOCTYPE html>
<html lang="km">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<title>Pink Wedding App</title>
<link rel="manifest" href="manifest.json">
<style>
  body { margin:0; font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen,Ubuntu,sans-serif;
    background: linear-gradient(135deg,#ffe6f0,#fff5fa); overflow:hidden; display:flex; flex-direction:column; height:100vh; position:relative; }

  /* Floating hearts */
  .heart { position:absolute; width:18px; height:18px; background:pink; transform:rotate(45deg);
    border-radius:2px; opacity:0.7; animation: floatUp 10s linear infinite; }
  .heart::before, .heart::after { content:""; position:absolute; width:18px; height:18px; background:pink; border-radius:50%; }
  .heart::before { top:-9px; left:0; }
  .heart::after { left:-9px; top:0; }
  @keyframes floatUp { 0%{transform:translateY(100vh) scale(0.5) rotate(45deg); opacity:0;} 30%{opacity:1;} 100%{transform:translateY(-10vh) scale(1.2) rotate(45deg); opacity:0;} }

  /* Header */
  .app-header { background:#ff4da6; color:white; padding:15px; text-align:center; font-size:20px; font-weight:bold; box-shadow:0 2px 5px rgba(0,0,0,0.1); border-bottom-left-radius:15px; border-bottom-right-radius:15px; z-index:2; }

  /* Views */
  .view { display:none; flex:1; padding:20px; overflow-y:auto; z-index:2; }
  .view.active { display:flex; flex-direction:column; }

  /* Cards */
  .card { background:white; border-radius:20px; box-shadow:0 5px 15px rgba(0,0,0,0.1); padding:20px; margin-bottom:20px; transition: transform 0.2s ease; text-align:center; }
  .card:hover { transform:translateY(-5px); }
  .card h2 { margin:10px 0 5px 0; color:#ff4da6; }
  .card p { color:#444; line-height:1.5; }
  .card img { width:120px; height:120px; border-radius:50%; object-fit:cover; margin-bottom:10px; border:3px solid #ffb6c1; }

  /* Buttons */
  .btn { display:inline-block; padding:12px 20px; background:#ff4da6; color:white; border:none; border-radius:12px; font-size:16px; cursor:pointer; overflow:hidden; position:relative; margin:5px;}
  .btn:hover { background:#e63e90; }

  /* Bottom nav */
  .bottom-nav { display:flex; justify-content:space-around; background:#fff; padding:10px; border-top:1px solid #eee; box-shadow:0 -2px 5px rgba(0,0,0,0.05); z-index:2; }
  .nav-btn { text-align:center; font-size:14px; color:#555; cursor:pointer; transition:0.3s; }
  .nav-btn.active { color:#ff4da6; font-weight:bold; text-shadow:0 0 8px rgba(255,77,166,0.7); }

  /* Install button */
  #installBtn { position:fixed; bottom:80px; right:20px; z-index:1000; display:none; }

  /* iOS banner */
  #iosBanner { display:none; position:fixed; bottom:80px; left:20px; right:20px; background:#ff4da6; color:white; padding:15px; border-radius:15px; text-align:center; font-size:14px; z-index:1000; box-shadow:0 4px 10px rgba(0,0,0,0.2); }

</style>
</head>
<body>

<div class="app-header">💖 Pink Wedding App</div>

<!-- Get Started Page -->
<div id="getstart" class="view active" style="justify-content:center;align-items:center;">
  <div class="card">
    <h2>សូមស្វាគមន៍!</h2>
    <p>ចុច "Get Started" ដើម្បីបង្ហាញ Home Page និង Install App</p>
    <button class="btn" id="getStartBtn">Get Started</button>
  </div>
</div>

<!-- Home Page -->
<div id="home" class="view">
  <div class="card">
    <h2>Home Page</h2>
    <p>នេះជាផ្ទាំង Home Page PWA iOS + Android style pink wedding.</p>
  </div>
</div>

<!-- Bottom nav -->
<div class="bottom-nav" style="display:none;">
  <div class="nav-btn active" onclick="showPage('home', this)">🏠 Home</div>
</div>

<!-- Install button for Android -->
<button id="installBtn" class="btn">📲 Install App</button>

<!-- iOS banner -->
<div id="iosBanner">📌 iOS users: Tap <strong>Share → Add to Home Screen</strong></div>

<script>
  // Page navigation
  function showPage(pageId, btn=null){
    document.querySelectorAll('.view').forEach(v=>v.classList.remove('active'));
    document.getElementById(pageId).classList.add('active');
    if(btn){
      document.querySelectorAll('.nav-btn').forEach(b=>b.classList.remove('active'));
      btn.classList.add('active');
    }
  }

  // Floating hearts background
  for(let i=0;i<20;i++){
    let heart=document.createElement("div");
    heart.className="heart";
    heart.style.left=Math.random()*100+"vw";
    heart.style.animationDuration=(5+Math.random()*7)+"s";
    document.body.appendChild(heart);
  }

  // Tap hearts effect
  document.body.addEventListener("click", function(e){
    const heart = document.createElement("div");
    heart.className="heart";
    heart.style.left = e.clientX - 9 + "px";
    heart.style.top = e.clientY - 9 + "px";
    heart.style.animationDuration = "1s";
    heart.style.opacity = 1;
    document.body.appendChild(heart);
    setTimeout(()=>heart.remove(),1000);
  });

  // Get Started button
  const getStartBtn = document.getElementById("getStartBtn");
  const bottomNav = document.querySelector(".bottom-nav");
  getStartBtn.addEventListener("click", () => {
    showPage("home");
    bottomNav.style.display="flex";
    promptInstall();
  });

  // PWA install
  let deferredPrompt;
  const installBtn = document.getElementById("installBtn");
  window.addEventListener('beforeinstallprompt', (e) => {
    e.preventDefault();
    deferredPrompt = e;
    if(!/iPhone|iPad|iPod/i.test(navigator.userAgent)){
      installBtn.style.display="block";
    }
  });
  installBtn.addEventListener("click", async () => {
    if(!deferredPrompt) return;
    deferredPrompt.prompt();
    const choice = await deferredPrompt.userChoice;
    console.log(choice.outcome);
    deferredPrompt = null;
    installBtn.style.display="none";
  });

  // iOS detection
  const isiOS = /iPhone|iPad|iPod/i.test(navigator.userAgent);
  const iosBanner = document.getElementById("iosBanner");
  function promptInstall(){
    if(isiOS){
      iosBanner.style.display="block";
      setTimeout(()=>iosBanner.style.display="none", 8000);
    }
  }
</script>
</body>
</html>
